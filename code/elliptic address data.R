{"cells":[{"cell_type":"markdown","metadata":{"id":"2UueufBV5Zvr"},"source":["## CODE - Building Transaction Sub-graphs and Address (node) features"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":6731,"status":"ok","timestamp":1653639015222,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"},"user_tz":-120},"id":"8vapKV-EDuad","outputId":"7c5fef53-98c7-4970-e180-c4c852bb6b35"},"outputs":[{"output_type":"stream","name":"stderr","text":["Warning message in system(\"timedatectl\", intern = TRUE):\n","“running command 'timedatectl' had status 1”\n","── \u001b[1mAttaching packages\u001b[22m ─────────────────────────────────────── tidyverse 1.3.1 ──\n","\n","\u001b[32m✔\u001b[39m \u001b[34mggplot2\u001b[39m 3.3.6     \u001b[32m✔\u001b[39m \u001b[34mpurrr  \u001b[39m 0.3.4\n","\u001b[32m✔\u001b[39m \u001b[34mtibble \u001b[39m 3.1.7     \u001b[32m✔\u001b[39m \u001b[34mdplyr  \u001b[39m 1.0.9\n","\u001b[32m✔\u001b[39m \u001b[34mtidyr  \u001b[39m 1.2.0     \u001b[32m✔\u001b[39m \u001b[34mstringr\u001b[39m 1.4.0\n","\u001b[32m✔\u001b[39m \u001b[34mreadr  \u001b[39m 2.1.2     \u001b[32m✔\u001b[39m \u001b[34mforcats\u001b[39m 0.5.1\n","\n","── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n","\n","\u001b[1mRows: \u001b[22m\u001b[34m3359198\u001b[39m \u001b[1mColumns: \u001b[22m\u001b[34m10\u001b[39m\n","\u001b[36m──\u001b[39m \u001b[1mColumn specification\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m  (4): input_address, output_address, entity, category\n","\u001b[32mdbl\u001b[39m  (5): timestep, txn_amount, fee, class, txId\n","\u001b[34mdttm\u001b[39m (1): block_timestamp\n","\n","\u001b[36mℹ\u001b[39m Use `spec()` to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.\n"]}],"source":["library(tidyverse)\n","\n","panel <- read_csv('elliptic_panel_new.csv')"]},{"cell_type":"markdown","source":["Calculate repeat interactions for each input and output address"],"metadata":{"id":"8dFVoUgVVB7d"}},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"pocXvthJZB1W","outputId":"c37eaa7d-883f-462e-e1e9-9cb4151b4a3d","executionInfo":{"status":"ok","timestamp":1653639588984,"user_tz":-120,"elapsed":573768,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"}}},"outputs":[{"output_type":"stream","name":"stderr","text":["\u001b[1m\u001b[22m`summarise()` has grouped output by 'input_address', 'output_address'. You can\n","override using the `.groups` argument.\n","\u001b[1m\u001b[22m`summarise()` has grouped output by 'input_address', 'output_address'. You can\n","override using the `.groups` argument.\n","\u001b[1m\u001b[22m`summarise()` has grouped output by 'input_address'. You can override using the\n","`.groups` argument.\n"]}],"source":["repeat_interactions_in <- panel %>% select(input_address, output_address) %>% mutate(type = \"in\") %>%\n","                          group_by(input_address, output_address, type) %>% \n","                          summarise(interactions = n()) %>% arrange(desc(interactions))\n","\n","repeat_interactions_out <- panel %>% select(output_address = input_address, input_address = output_address) %>% mutate(type = \"out\") %>% \n","                           group_by(input_address, output_address, type) %>% summarise(interactions = n())\n","\n","repeat_interactions <- bind_rows(repeat_interactions_in, repeat_interactions_out) %>%\n","                       summarise(interactions = sum(interactions), two_way = if_else(n_distinct(type) > 1, 1, 0)) "]},{"cell_type":"markdown","source":["Calculate first hop in input -> output direction for each input address "],"metadata":{"id":"IkuQfs2OVH4V"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"AO_zI0S7D8pz","colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"status":"ok","timestamp":1653639687041,"user_tz":-120,"elapsed":98125,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"}},"outputId":"44c07518-d75e-4658-a058-797d33871460"},"outputs":[{"output_type":"stream","name":"stderr","text":["\u001b[1m\u001b[22m`summarise()` has grouped output by 'node', 'node_source'. You can override\n","using the `.groups` argument.\n"]}],"source":["# Hop 1 connections - one edge for any directed connection\n","edge_hop1_input <- panel %>% mutate(node = input_address) %>%\n","                   select(node, node_source = input_address, node_sink = output_address, class,\n","                          txn_amount, fee, entity, category) %>% \n","                   group_by(node, node_source, node_sink) %>%\n","                   summarise(class = first(class), entity = first(entity), category = first(category), txn_amount = sum(txn_amount), fee = sum(fee)) %>% \n","                   left_join(repeat_interactions, by = c(\"node_source\" = \"input_address\", \"node_sink\" = \"output_address\"))\n"]},{"cell_type":"markdown","source":["Exclude input with more than 100 degrees from center input address for computational tractability. Most of these transactions are unlabelled or low risk."],"metadata":{"id":"BYULEBD1V7_3"}},{"cell_type":"code","source":["# Filter out transactions with more than 100 edges0\n","many_edge_filter_input <- edge_hop1_input %>% group_by(node) %>% summarise(node_source = n(), node_sink = n(), class = first(class)) %>% ungroup() %>% \n","                          filter(node_source >= 100) %>% select(node) \n","\n","edge_hop1_input <- edge_hop1_input %>% anti_join(many_edge_filter_input, by = \"node\")\n"],"metadata":{"id":"MYxaQpw1uWEZ"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["Calculate second hop from input -> output addresses"],"metadata":{"id":"FqYve9PnWLHY"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"OJ2O2DO8EBUL"},"outputs":[],"source":["edge_hop2_input <- edge_hop1_input %>% ungroup() %>%\n","                   left_join(edge_hop1_input %>% ungroup() %>% select(node_source, node_sink2 = node_sink, txn_amount2 = txn_amount, fee2 = fee,\n","                   interactions2 = interactions, two_way2 = two_way), \n","                             by = c(\"node_sink\" = \"node_source\")) %>% filter(!is.na(node_sink2)) %>%\n","                   mutate(node_source2 = node_sink)\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"tXVZNEs7V3P1"},"outputs":[],"source":["edge_hop2_input <- edge_hop2_input %>% filter(!is.na(class))"]},{"cell_type":"markdown","source":["Calculate third hop from input -> output addresses"],"metadata":{"id":"x2afZb1WWifE"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"5wPpTFmFEOtP"},"outputs":[],"source":["edge_hop3_input <- edge_hop2_input %>% ungroup() %>%\n","                   left_join(edge_hop1_input %>% ungroup() %>% select(node_source, node_sink3 = node_sink, txn_amount3 = txn_amount,\n","                   fee3 = fee, interactions3 = interactions, two_way3 = two_way), \n","                             by = c(\"node_sink2\" = \"node_source\")) %>% filter(!is.na(node_sink3)) %>% \n","                   mutate(node_source3 = node_sink2)  "]},{"cell_type":"markdown","source":["Split hops into first second and third hop to bind into second edge list"],"metadata":{"id":"C14PMaOMWmPM"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"FUGsYeL_7BcJ"},"outputs":[],"source":["edge_hop1_input_split <- edge_hop3_input %>% select(node, class, node_source, node_sink, txn_amount, fee, interactions, two_way, entity, category) %>% distinct()\n"]},{"cell_type":"code","source":["edge_hop2_input_split <- edge_hop3_input %>% select(node, class, node_source = node_source2, node_sink = node_sink2,\n","                                                    txn_amount = txn_amount2, fee = fee2, interactions = interactions2,\n","                                                    two_way = two_way2, entity, category) %>% distinct()\n"],"metadata":{"id":"QRKirZLib92b"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["edge_hop3_input_split <- edge_hop3_input %>% select(node, class, node_source = node_source3, node_sink = node_sink3,\n","                                                    txn_amount = txn_amount3, fee = fee3 , interactions = interactions3,\n","                                                    two_way = two_way3, entity, category) %>% distinct()"],"metadata":{"id":"O_DzIshWb_JC"},"execution_count":null,"outputs":[]},{"cell_type":"markdown","source":["Two step bind into edge list so computer doesnt crash"],"metadata":{"id":"nJtLOjq5XBQx"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"gwgaZ3Y3JcIo"},"outputs":[],"source":["edge_hop3_input_final <- bind_rows(edge_hop1_input_split, edge_hop2_input_split)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"cZM0QrlVKdNK"},"outputs":[],"source":["edge_hop3_input_final <- bind_rows(edge_hop3_input_final, edge_hop3_input_split) %>% arrange(node) #%>% filter(!is.na(node_source)) %>% filter(!is.na(node_sink))\n"]},{"cell_type":"code","source":["edge_hop3_input_final %>% summarise(cnt = n_distinct(node))"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":147},"id":"RktLxpw-tEeK","executionInfo":{"status":"ok","timestamp":1653639802595,"user_tz":-120,"elapsed":31,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"}},"outputId":"c135a2d0-49f8-4d75-ea1a-49235d33f5c8"},"execution_count":null,"outputs":[{"output_type":"display_data","data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 1 × 1</caption>\n","<thead>\n","\t<tr><th scope=col>cnt</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>102075</td></tr>\n","</tbody>\n","</table>\n"],"text/markdown":"\nA tibble: 1 × 1\n\n| cnt &lt;int&gt; |\n|---|\n| 102075 |\n\n","text/latex":"A tibble: 1 × 1\n\\begin{tabular}{l}\n cnt\\\\\n <int>\\\\\n\\hline\n\t 102075\\\\\n\\end{tabular}\n","text/plain":["  cnt   \n","1 102075"]},"metadata":{}}]},{"cell_type":"markdown","source":["Wrtie to csv and zip for download"],"metadata":{"id":"KfiMiwaVXL68"}},{"cell_type":"code","execution_count":null,"metadata":{"id":"xPlFNPrw7y-q"},"outputs":[],"source":["write_csv(edge_hop3_input_final, 'edgelist_hop3_input.csv')"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"SGWXDf4ZfSI3"},"outputs":[],"source":["zip(\"edge_hop3.zip\", \"edgelist_hop3_input.csv\")\n"]},{"cell_type":"markdown","source":["Calculate address features, including number of repeat partners and interaction counts with all other nodes"],"metadata":{"id":"kgGWh1G2XO1m"}},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":146553,"status":"ok","timestamp":1653640024301,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"},"user_tz":-120},"id":"imY0x2kO8H7y","outputId":"02401b37-1f99-4c33-af90-7681a7644eaa"},"outputs":[{"output_type":"stream","name":"stderr","text":["\u001b[1m\u001b[22m`summarise()` has grouped output by 'type'. You can override using the\n","`.groups` argument.\n"]}],"source":["\n","find_mode <- function(v) {\n","  uniqv <- unique(v)\n","  uniqv[which.max(tabulate(match(v, uniqv)))]\n","}\n","\n","repeat_partners <- repeat_interactions %>% ungroup() %>% distinct(input_address, .keep_all = TRUE) %>% group_by(input_address) %>% filter(interactions > 1) %>%\n","                   summarise(repeat_partners = n(), interaction_mean = mean(interactions),\n","                             interaction_max = max(interactions), interaction_min = min(interactions), interaction_median = median(interactions))\n","\n","address_features <- panel %>% select(-c(class, block_timestamp, entity, category)) %>%\n","                    pivot_longer(-c(txn_amount, txId, fee, timestep), names_to = \"type\", values_to = \"address\") %>%  \n","                    group_by(type, address) %>% \n","                    summarise(deg = n(), txns = n_distinct(txId),\n","                              txn_total = sum(txn_amount, na.rm= TRUE), fee_total = sum(fee, na.rm= TRUE),\n","                              fee_share = fee_total/txn_total, txn_max = max(txn_amount, na.rm = TRUE),\n","                              txn_min = min(txn_amount, na.rm = TRUE), txn_mean = mean(txn_amount, na.rm = TRUE),\n","                              txn_median = median(txn_amount, na.rm = TRUE), #timestep_mode = find_mode(timestep),\n","                              timestep_app = n_distinct(timestep)) %>%\n","                    pivot_wider(names_from = \"type\", values_from = c(deg:txn_median)) %>% \n","                    left_join(repeat_partners, by = c(\"address\" = \"input_address\")) %>% distinct(address, .keep_all = TRUE)\n","\n","                    "]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":306},"executionInfo":{"elapsed":31,"status":"ok","timestamp":1653640024303,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"},"user_tz":-120},"id":"-4bqkUtcx-B0","outputId":"b63e44c9-dff1-45a3-bb40-c881cdcf86d1"},"outputs":[{"output_type":"display_data","data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 25</caption>\n","<thead>\n","\t<tr><th scope=col>address</th><th scope=col>timestep_app</th><th scope=col>deg_input_address</th><th scope=col>deg_output_address</th><th scope=col>txns_input_address</th><th scope=col>txns_output_address</th><th scope=col>txn_total_input_address</th><th scope=col>txn_total_output_address</th><th scope=col>fee_total_input_address</th><th scope=col>fee_total_output_address</th><th scope=col>⋯</th><th scope=col>txn_min_output_address</th><th scope=col>txn_mean_input_address</th><th scope=col>txn_mean_output_address</th><th scope=col>txn_median_input_address</th><th scope=col>txn_median_output_address</th><th scope=col>repeat_partners</th><th scope=col>interaction_mean</th><th scope=col>interaction_max</th><th scope=col>interaction_min</th><th scope=col>interaction_median</th></tr>\n","\t<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>⋯</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>3425d041cf</td><td>46</td><td>1803</td><td> NA</td><td>580</td><td> NA</td><td>250842231499</td><td>       NA</td><td>21572974</td><td>      NA</td><td>⋯</td><td>  NA</td><td>139124920</td><td>     NA</td><td>11023102</td><td>   NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>d97580e04f</td><td>38</td><td>  NA</td><td>152</td><td> NA</td><td>148</td><td>          NA</td><td>227398315</td><td>      NA</td><td>559106.8</td><td>⋯</td><td>5938</td><td>       NA</td><td>1496042</td><td>      NA</td><td>89487</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>b4d37d52b4</td><td>37</td><td>1280</td><td> NA</td><td>142</td><td> NA</td><td> 39696376782</td><td>       NA</td><td> 9991607</td><td>      NA</td><td>⋯</td><td>  NA</td><td> 31012794</td><td>     NA</td><td> 1307733</td><td>   NA</td><td> 1</td><td> 5</td><td> 5</td><td> 5</td><td> 5</td></tr>\n","\t<tr><td>553ac4ccbc</td><td>34</td><td> 995</td><td> NA</td><td>435</td><td> NA</td><td>593272972879</td><td>       NA</td><td> 9770244</td><td>      NA</td><td>⋯</td><td>  NA</td><td>596254244</td><td>     NA</td><td> 8639159</td><td>   NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>7733986b3a</td><td>33</td><td>1092</td><td> NA</td><td>493</td><td> NA</td><td>521335490498</td><td>       NA</td><td> 9453816</td><td>      NA</td><td>⋯</td><td>  NA</td><td>477413453</td><td>     NA</td><td>10000000</td><td>   NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td></tr>\n","\t<tr><td>dc27e12eb8</td><td>33</td><td> 994</td><td> NA</td><td>148</td><td> NA</td><td> 90035765034</td><td>       NA</td><td> 5860600</td><td>      NA</td><td>⋯</td><td>  NA</td><td> 90579240</td><td>     NA</td><td> 4600742</td><td>   NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td><td>NA</td></tr>\n","</tbody>\n","</table>\n"],"text/markdown":"\nA tibble: 6 × 25\n\n| address &lt;chr&gt; | timestep_app &lt;int&gt; | deg_input_address &lt;int&gt; | deg_output_address &lt;int&gt; | txns_input_address &lt;int&gt; | txns_output_address &lt;int&gt; | txn_total_input_address &lt;dbl&gt; | txn_total_output_address &lt;dbl&gt; | fee_total_input_address &lt;dbl&gt; | fee_total_output_address &lt;dbl&gt; | ⋯ ⋯ | txn_min_output_address &lt;dbl&gt; | txn_mean_input_address &lt;dbl&gt; | txn_mean_output_address &lt;dbl&gt; | txn_median_input_address &lt;dbl&gt; | txn_median_output_address &lt;dbl&gt; | repeat_partners &lt;int&gt; | interaction_mean &lt;dbl&gt; | interaction_max &lt;int&gt; | interaction_min &lt;int&gt; | interaction_median &lt;int&gt; |\n|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|\n| 3425d041cf | 46 | 1803 |  NA | 580 |  NA | 250842231499 |        NA | 21572974 |       NA | ⋯ |   NA | 139124920 |      NA | 11023102 |    NA | NA | NA | NA | NA | NA |\n| d97580e04f | 38 |   NA | 152 |  NA | 148 |           NA | 227398315 |       NA | 559106.8 | ⋯ | 5938 |        NA | 1496042 |       NA | 89487 | NA | NA | NA | NA | NA |\n| b4d37d52b4 | 37 | 1280 |  NA | 142 |  NA |  39696376782 |        NA |  9991607 |       NA | ⋯ |   NA |  31012794 |      NA |  1307733 |    NA |  1 |  5 |  5 |  5 |  5 |\n| 553ac4ccbc | 34 |  995 |  NA | 435 |  NA | 593272972879 |        NA |  9770244 |       NA | ⋯ |   NA | 596254244 |      NA |  8639159 |    NA | NA | NA | NA | NA | NA |\n| 7733986b3a | 33 | 1092 |  NA | 493 |  NA | 521335490498 |        NA |  9453816 |       NA | ⋯ |   NA | 477413453 |      NA | 10000000 |    NA | NA | NA | NA | NA | NA |\n| dc27e12eb8 | 33 |  994 |  NA | 148 |  NA |  90035765034 |        NA |  5860600 |       NA | ⋯ |   NA |  90579240 |      NA |  4600742 |    NA | NA | NA | NA | NA | NA |\n\n","text/latex":"A tibble: 6 × 25\n\\begin{tabular}{lllllllllllllllllllll}\n address & timestep\\_app & deg\\_input\\_address & deg\\_output\\_address & txns\\_input\\_address & txns\\_output\\_address & txn\\_total\\_input\\_address & txn\\_total\\_output\\_address & fee\\_total\\_input\\_address & fee\\_total\\_output\\_address & ⋯ & txn\\_min\\_output\\_address & txn\\_mean\\_input\\_address & txn\\_mean\\_output\\_address & txn\\_median\\_input\\_address & txn\\_median\\_output\\_address & repeat\\_partners & interaction\\_mean & interaction\\_max & interaction\\_min & interaction\\_median\\\\\n <chr> & <int> & <int> & <int> & <int> & <int> & <dbl> & <dbl> & <dbl> & <dbl> & ⋯ & <dbl> & <dbl> & <dbl> & <dbl> & <dbl> & <int> & <dbl> & <int> & <int> & <int>\\\\\n\\hline\n\t 3425d041cf & 46 & 1803 &  NA & 580 &  NA & 250842231499 &        NA & 21572974 &       NA & ⋯ &   NA & 139124920 &      NA & 11023102 &    NA & NA & NA & NA & NA & NA\\\\\n\t d97580e04f & 38 &   NA & 152 &  NA & 148 &           NA & 227398315 &       NA & 559106.8 & ⋯ & 5938 &        NA & 1496042 &       NA & 89487 & NA & NA & NA & NA & NA\\\\\n\t b4d37d52b4 & 37 & 1280 &  NA & 142 &  NA &  39696376782 &        NA &  9991607 &       NA & ⋯ &   NA &  31012794 &      NA &  1307733 &    NA &  1 &  5 &  5 &  5 &  5\\\\\n\t 553ac4ccbc & 34 &  995 &  NA & 435 &  NA & 593272972879 &        NA &  9770244 &       NA & ⋯ &   NA & 596254244 &      NA &  8639159 &    NA & NA & NA & NA & NA & NA\\\\\n\t 7733986b3a & 33 & 1092 &  NA & 493 &  NA & 521335490498 &        NA &  9453816 &       NA & ⋯ &   NA & 477413453 &      NA & 10000000 &    NA & NA & NA & NA & NA & NA\\\\\n\t dc27e12eb8 & 33 &  994 &  NA & 148 &  NA &  90035765034 &        NA &  5860600 &       NA & ⋯ &   NA &  90579240 &      NA &  4600742 &    NA & NA & NA & NA & NA & NA\\\\\n\\end{tabular}\n","text/plain":["  address    timestep_app deg_input_address deg_output_address\n","1 3425d041cf 46           1803               NA               \n","2 d97580e04f 38             NA              152               \n","3 b4d37d52b4 37           1280               NA               \n","4 553ac4ccbc 34            995               NA               \n","5 7733986b3a 33           1092               NA               \n","6 dc27e12eb8 33            994               NA               \n","  txns_input_address txns_output_address txn_total_input_address\n","1 580                 NA                 250842231499           \n","2  NA                148                           NA           \n","3 142                 NA                  39696376782           \n","4 435                 NA                 593272972879           \n","5 493                 NA                 521335490498           \n","6 148                 NA                  90035765034           \n","  txn_total_output_address fee_total_input_address fee_total_output_address ⋯\n","1        NA                21572974                      NA                 ⋯\n","2 227398315                      NA                559106.8                 ⋯\n","3        NA                 9991607                      NA                 ⋯\n","4        NA                 9770244                      NA                 ⋯\n","5        NA                 9453816                      NA                 ⋯\n","6        NA                 5860600                      NA                 ⋯\n","  txn_min_output_address txn_mean_input_address txn_mean_output_address\n","1   NA                   139124920                   NA                \n","2 5938                          NA              1496042                \n","3   NA                    31012794                   NA                \n","4   NA                   596254244                   NA                \n","5   NA                   477413453                   NA                \n","6   NA                    90579240                   NA                \n","  txn_median_input_address txn_median_output_address repeat_partners\n","1 11023102                    NA                     NA             \n","2       NA                 89487                     NA             \n","3  1307733                    NA                      1             \n","4  8639159                    NA                     NA             \n","5 10000000                    NA                     NA             \n","6  4600742                    NA                     NA             \n","  interaction_mean interaction_max interaction_min interaction_median\n","1 NA               NA              NA              NA                \n","2 NA               NA              NA              NA                \n","3  5                5               5               5                \n","4 NA               NA              NA              NA                \n","5 NA               NA              NA              NA                \n","6 NA               NA              NA              NA                "]},"metadata":{}}],"source":["head(address_features %>% arrange(desc(timestep_app)))"]},{"cell_type":"code","source":["colnames(address_features)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":69},"id":"WGouhXoP-tMV","executionInfo":{"status":"ok","timestamp":1653645969947,"user_tz":-120,"elapsed":593,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"}},"outputId":"4367f8c2-7879-497e-fd9b-c9191daff115"},"execution_count":19,"outputs":[{"output_type":"display_data","data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'address'</li><li>'timestep_app'</li><li>'deg_input_address'</li><li>'deg_output_address'</li><li>'txns_input_address'</li><li>'txns_output_address'</li><li>'txn_total_input_address'</li><li>'txn_total_output_address'</li><li>'fee_total_input_address'</li><li>'fee_total_output_address'</li><li>'fee_share_input_address'</li><li>'fee_share_output_address'</li><li>'txn_max_input_address'</li><li>'txn_max_output_address'</li><li>'txn_min_input_address'</li><li>'txn_min_output_address'</li><li>'txn_mean_input_address'</li><li>'txn_mean_output_address'</li><li>'txn_median_input_address'</li><li>'txn_median_output_address'</li><li>'repeat_partners'</li><li>'interaction_mean'</li><li>'interaction_max'</li><li>'interaction_min'</li><li>'interaction_median'</li></ol>\n"],"text/markdown":"1. 'address'\n2. 'timestep_app'\n3. 'deg_input_address'\n4. 'deg_output_address'\n5. 'txns_input_address'\n6. 'txns_output_address'\n7. 'txn_total_input_address'\n8. 'txn_total_output_address'\n9. 'fee_total_input_address'\n10. 'fee_total_output_address'\n11. 'fee_share_input_address'\n12. 'fee_share_output_address'\n13. 'txn_max_input_address'\n14. 'txn_max_output_address'\n15. 'txn_min_input_address'\n16. 'txn_min_output_address'\n17. 'txn_mean_input_address'\n18. 'txn_mean_output_address'\n19. 'txn_median_input_address'\n20. 'txn_median_output_address'\n21. 'repeat_partners'\n22. 'interaction_mean'\n23. 'interaction_max'\n24. 'interaction_min'\n25. 'interaction_median'\n\n\n","text/latex":"\\begin{enumerate*}\n\\item 'address'\n\\item 'timestep\\_app'\n\\item 'deg\\_input\\_address'\n\\item 'deg\\_output\\_address'\n\\item 'txns\\_input\\_address'\n\\item 'txns\\_output\\_address'\n\\item 'txn\\_total\\_input\\_address'\n\\item 'txn\\_total\\_output\\_address'\n\\item 'fee\\_total\\_input\\_address'\n\\item 'fee\\_total\\_output\\_address'\n\\item 'fee\\_share\\_input\\_address'\n\\item 'fee\\_share\\_output\\_address'\n\\item 'txn\\_max\\_input\\_address'\n\\item 'txn\\_max\\_output\\_address'\n\\item 'txn\\_min\\_input\\_address'\n\\item 'txn\\_min\\_output\\_address'\n\\item 'txn\\_mean\\_input\\_address'\n\\item 'txn\\_mean\\_output\\_address'\n\\item 'txn\\_median\\_input\\_address'\n\\item 'txn\\_median\\_output\\_address'\n\\item 'repeat\\_partners'\n\\item 'interaction\\_mean'\n\\item 'interaction\\_max'\n\\item 'interaction\\_min'\n\\item 'interaction\\_median'\n\\end{enumerate*}\n","text/plain":[" [1] \"address\"                   \"timestep_app\"             \n"," [3] \"deg_input_address\"         \"deg_output_address\"       \n"," [5] \"txns_input_address\"        \"txns_output_address\"      \n"," [7] \"txn_total_input_address\"   \"txn_total_output_address\" \n"," [9] \"fee_total_input_address\"   \"fee_total_output_address\" \n","[11] \"fee_share_input_address\"   \"fee_share_output_address\" \n","[13] \"txn_max_input_address\"     \"txn_max_output_address\"   \n","[15] \"txn_min_input_address\"     \"txn_min_output_address\"   \n","[17] \"txn_mean_input_address\"    \"txn_mean_output_address\"  \n","[19] \"txn_median_input_address\"  \"txn_median_output_address\"\n","[21] \"repeat_partners\"           \"interaction_mean\"         \n","[23] \"interaction_max\"           \"interaction_min\"          \n","[25] \"interaction_median\"       "]},"metadata":{}}]},{"cell_type":"code","source":["ncol(address_features) - 1 #for address"],"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":34},"id":"k8jAat5z-07-","executionInfo":{"status":"ok","timestamp":1653646005091,"user_tz":-120,"elapsed":414,"user":{"displayName":"Ivan Aguilar","userId":"05805327091284749884"}},"outputId":"87a8fb08-7adb-4724-afc3-ce55817a039d"},"execution_count":21,"outputs":[{"output_type":"display_data","data":{"text/html":["24"],"text/markdown":"24","text/latex":"24","text/plain":["[1] 24"]},"metadata":{}}]},{"cell_type":"code","execution_count":null,"metadata":{"id":"7qN8Cc0faSX0"},"outputs":[],"source":["write_csv(address_features, 'node_address_features.csv')"]},{"cell_type":"code","source":[""],"metadata":{"id":"zKiFNeuDnwBu"},"execution_count":null,"outputs":[]}],"metadata":{"colab":{"background_execution":"on","collapsed_sections":[],"machine_shape":"hm","name":"elliptic address data.R","provenance":[],"authorship_tag":"ABX9TyP+IsfqEpkOJCpn97my3V+w"},"kernelspec":{"display_name":"R","name":"ir"},"language_info":{"name":"R"}},"nbformat":4,"nbformat_minor":0}